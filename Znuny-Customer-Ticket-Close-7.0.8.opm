<?xml version="1.0" encoding="utf-8" ?>
<otrs_package version="1.1">
    <Name>Znuny-Customer-Ticket-Close</Name>
    <Version>7.0.8</Version>
    <Vendor>mo-azfar</Vendor>
    <URL>https://github.com/mo-azfar</URL>
    <License>GNU GENERAL PUBLIC LICENSE Version 3, 29 June 2007</License>
    <ChangeLog Date="2024-01-25 10:00:00 +0800" Version="7.0.1">New package.</ChangeLog>
    <ChangeLog Date="2024-01-25 11:00:00 +0800" Version="7.0.2">Use public portal instead of customer portal.</ChangeLog>
    <ChangeLog Date="2024-01-25 12:00:00 +0800" Version="7.0.3">Set one clik url only for registered customer.</ChangeLog>
    <ChangeLog Date="2024-01-25 15:00:00 +0800" Version="7.0.4">Update code.</ChangeLog>
    <ChangeLog Date="2024-01-25 16:00:00 +0800" Version="7.0.5">Add dynamic field config.</ChangeLog>
    <ChangeLog Date="2024-01-30 10:00:00 +0800" Version="7.0.6">Use menu button instead of widget button.</ChangeLog>
    <ChangeLog Date="2024-01-19 07:00:00 +0800" Version="7.0.7">Change directory to default.</ChangeLog>
    <ChangeLog Date="2024-03-27 09:00:00 +0800" Version="7.0.8">Applied code policy.</ChangeLog>
    <Description Lang="en">Allow customer to close their ticket via one-time link (public portal) provided by the agent reply</Description>
    <Framework>7.0.x</Framework>
    <IntroInstall Lang="en" Title="Install Information" Type="pre">
        &lt;br/&gt;
        &lt;b&gt;WELCOME&lt;/b&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        You are about to install the package Znuny-Customer-Ticket-Close.Check &lt;a href='https://github.com/mo-azfar/Znuny-Customer-Ticket-Close' target='_blank'/&gt;README&lt;/a&gt;&lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        &lt;b&gt;Click 'GENERATE TIKET CLOSE SESSION' at ticket zoom menu first and then you good to go.
        &lt;br/&gt;
        &lt;br/&gt;
        &lt;b&gt;Append one click URL at agent reply - check github&lt;br/&gt;&lt;br/&gt;
        &lt;/b&gt;&lt;br/&gt;&lt;br/&gt;
        ((enjoy))&lt;br/&gt;
        &lt;br/&gt;
    </IntroInstall>
    <IntroUpgrade Lang="en" Title="Upgrade Information" Type="pre">
        &lt;br/&gt;
        Changelog&lt;br/&gt;
        7.0.1 - New package.&lt;br/&gt;
        7.0.2 - Use public portal instead of customer portal.&lt;br/&gt;
        7.0.3 - Set one clik url only for registered customer.&lt;br/&gt;
        7.0.4 - Update code.&lt;br/&gt;
        7.0.5 - Add dynamic field config.&lt;br/&gt;
        7.0.6 - Use menu button instead of widget button.&lt;br/&gt;
        7.0.7 - Change directory to default.&lt;br/&gt;
        7.0.8 - Applied code policy.
        &lt;br/&gt;&lt;br/&gt;
        ((enjoy))&lt;br/&gt;
        &lt;br/&gt;
    </IntroUpgrade>
    <CodeInstall Type="post">
my $ZnunyHelperObject = $Kernel::OM-&gt;Get('Kernel::System::ZnunyHelper');
my @DynamicFields = (
        {
            Name       =&gt; 'CustomerSession',
            Label      =&gt; &quot;Customer Session&quot;,
            ObjectType =&gt; 'Ticket',
            FieldType  =&gt; 'Text',
            Config     =&gt; {
                DefaultValue =&gt; &quot;&quot;,
            },
        },
    );
my $Result = $ZnunyHelperObject-&gt;_DynamicFieldsCreateIfNotExists( @DynamicFields );
</CodeInstall>
    <BuildDate>2024-03-27 09:12:55</BuildDate>
    <BuildHost>app.wsl.my</BuildHost>
    <Filelist>
        <File Location="Kernel/Config/Files/XML/ZZZPublicTicketClose.xml" Permission="644" Encode="Base64">PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPG90cnNfY29uZmlnIHZlcnNpb249IjIuMCIgaW5pdD0iQXBwbGljYXRpb24iPgogICAgPFNldHRpbmcgTmFtZT0iVGlja2V0OjpGcm9udGVuZDo6TWVudU1vZHVsZSMjIzQ0OS1DdXN0b21lclNlc3Npb24iIFJlcXVpcmVkPSIwIiBWYWxpZD0iMSI+CiAgICAgICAgPERlc2NyaXB0aW9uIFRyYW5zbGF0YWJsZT0iMSI+U2hvd3MgYSBsaW5rIGluIHRoZSBtZW51IHRvIGdlbnJlYXRlIGEgY3VzdG9tZXIgc2Vzc2lvbiBpbiB0aGUgdGlja2V0IHpvb20gdmlldyBvZiB0aGUgYWdlbnQgaW50ZXJmYWNlLjwvRGVzY3JpcHRpb24+CiAgICAgICAgPE5hdmlnYXRpb24+RnJvbnRlbmQ6OkFnZW50OjpWaWV3OjpUaWNrZXRab29tOjpNZW51TW9kdWxlPC9OYXZpZ2F0aW9uPgogICAgICAgIDxWYWx1ZT4KICAgICAgICAgICAgPEhhc2g+CiAgICAgICAgICAgICAgICA8SXRlbSBLZXk9Ik1vZHVsZSI+S2VybmVsOjpPdXRwdXQ6OkhUTUw6OlRpY2tldE1lbnU6OkdlbmVyaWM8L0l0ZW0+CiAgICAgICAgICAgICAgICA8SXRlbSBLZXk9Ik5hbWUiIFRyYW5zbGF0YWJsZT0iMSI+R2VuZXJhdGUgVGlja2V0IENsb3NlIFNlc3Npb248L0l0ZW0+CiAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IkRlc2NyaXB0aW9uIiBUcmFuc2xhdGFibGU9IjEiPkdlbmVyYXRlIFRpY2tldCBDbG9zZSBTZXNzaW9uIGZvciBDdXN0b21lcjwvSXRlbT4KICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iQWN0aW9uIj5BZ2VudFRpY2tldEN1c3RvbWVyU2Vzc2lvbjwvSXRlbT4KICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iTGluayI+QWN0aW9uPUFnZW50VGlja2V0Q3VzdG9tZXJTZXNzaW9uO1RpY2tldElEPVslIERhdGEuVGlja2V0SUQgfCBodG1sICVdPC9JdGVtPgogICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJUYXJnZXQiPjwvSXRlbT4KICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iUG9wdXBUeXBlIj48L0l0ZW0+CiAgICAgICAgICAgIDwvSGFzaD4KICAgICAgICA8L1ZhbHVlPgogICAgPC9TZXR0aW5nPgoJICAgIDxTZXR0aW5nIE5hbWU9IlB1YmxpY0Zyb250ZW5kOjpNb2R1bGUjIyNQdWJsaWNUaWNrZXRDbG9zZSIgUmVxdWlyZWQ9IjAiIFZhbGlkPSIxIj4KICAgICAgICA8RGVzY3JpcHRpb24gVHJhbnNsYXRhYmxlPSIxIj5Gcm9udGVuZCBtb2R1bGUgcmVnaXN0cmF0aW9uIGZvciB0aGUgUHVibGljIGludGVyZmFjZS48L0Rlc2NyaXB0aW9uPgogICAgICAgIDxOYXZpZ2F0aW9uPkZyb250ZW5kOjpQdWJsaWM6Ok1vZHVsZVJlZ2lzdHJhdGlvbjwvTmF2aWdhdGlvbj4KICAgICAgICA8VmFsdWU+CiAgICAgICAgICAgIDxJdGVtIFZhbHVlVHlwZT0iRnJvbnRlbmRSZWdpc3RyYXRpb24iPgogICAgICAgICAgICAgICAgPEhhc2g+CiAgICAgICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJHcm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxBcnJheT4KICAgICAgICAgICAgICAgICAgICAgICAgPC9BcnJheT4KICAgICAgICAgICAgICAgICAgICA8L0l0ZW0+CiAgICAgICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJHcm91cFJvIj4KICAgICAgICAgICAgICAgICAgICAgICAgPEFycmF5PgogICAgICAgICAgICAgICAgICAgICAgICA8L0FycmF5PgogICAgICAgICAgICAgICAgICAgIDwvSXRlbT4KICAgICAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IkRlc2NyaXB0aW9uIiBUcmFuc2xhdGFibGU9IjEiPkNsb3NlIHRpY2tldHMuPC9JdGVtPgogICAgICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iTmF2QmFyTmFtZSI+VGlja2V0PC9JdGVtPgogICAgICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iVGl0bGUiIFRyYW5zbGF0YWJsZT0iMSI+Q2xvc2UgVGlja2V0PC9JdGVtPgogICAgICAgICAgICAgICAgPC9IYXNoPgogICAgICAgICAgICA8L0l0ZW0+CiAgICAgICAgPC9WYWx1ZT4KICAgIDwvU2V0dGluZz4KICAgIDxTZXR0aW5nIE5hbWU9IkxvYWRlcjo6TW9kdWxlOjpQdWJsaWNUaWNrZXRDbG9zZSMjIzAwMi1UaWNrZXQiIFJlcXVpcmVkPSIwIiBWYWxpZD0iMSI+CiAgICAgICAgPERlc2NyaXB0aW9uIFRyYW5zbGF0YWJsZT0iMSI+TG9hZGVyIG1vZHVsZSByZWdpc3RyYXRpb24gZm9yIHRoZSBwdWJsaWMgaW50ZXJmYWNlLjwvRGVzY3JpcHRpb24+CiAgICAgICAgPE5hdmlnYXRpb24+RnJvbnRlbmQ6OlB1YmxpYzo6TW9kdWxlUmVnaXN0cmF0aW9uPC9OYXZpZ2F0aW9uPgogICAgICAgIDxWYWx1ZT4KICAgICAgICAgICAgPEhhc2g+CiAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IkphdmFTY3JpcHQiPgogICAgICAgICAgICAgICAgICAgIDxBcnJheT4KICAgICAgICAgICAgICAgICAgICA8L0FycmF5PgogICAgICAgICAgICAgICAgPC9JdGVtPgogICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJDU1MiPgogICAgICAgICAgICAgICAgICAgIDxBcnJheT4KICAgICAgICAgICAgICAgICAgICA8L0FycmF5PgogICAgICAgICAgICAgICAgPC9JdGVtPgogICAgICAgICAgICA8L0hhc2g+CiAgICAgICAgPC9WYWx1ZT4KICAgIDwvU2V0dGluZz4KICAgIDxTZXR0aW5nIE5hbWU9IkZyb250ZW5kOjpNb2R1bGUjIyNBZ2VudFRpY2tldEN1c3RvbWVyU2Vzc2lvbiIgUmVxdWlyZWQ9IjAiIFZhbGlkPSIxIj4KICAgICAgICA8RGVzY3JpcHRpb24gVHJhbnNsYXRhYmxlPSIxIj5Gcm9udGVuZE1vZHVsZVJlZ2lzdHJhdGlvbiBmb3IgQWdlbnRUaWNrZXRDdXN0b21lclNlc3Npb24gbW9kdWxlLjwvRGVzY3JpcHRpb24+CiAgICAgICAgPE5hdmlnYXRpb24+RnJvbnRlbmQ6OkFnZW50OjpNb2R1bGVSZWdpc3RyYXRpb248L05hdmlnYXRpb24+CiAgICAgICAgPFZhbHVlPgogICAgICAgICAgICA8SXRlbSBWYWx1ZVR5cGU9IkZyb250ZW5kUmVnaXN0cmF0aW9uIj4KICAgICAgICAgICAgICAgIDxIYXNoPgogICAgICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iR3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8QXJyYXk+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvQXJyYXk+CiAgICAgICAgICAgICAgICAgICAgPC9JdGVtPgogICAgICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iR3JvdXBSbyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxBcnJheT4KICAgICAgICAgICAgICAgICAgICAgICAgPC9BcnJheT4KICAgICAgICAgICAgICAgICAgICA8L0l0ZW0+CiAgICAgICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJEZXNjcmlwdGlvbiIgVHJhbnNsYXRhYmxlPSIxIj5BZ2VudCBUaWNrZXQgQ3VzdG9tZXIgU2Vzc2lvbi48L0l0ZW0+CiAgICAgICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJUaXRsZSIgVHJhbnNsYXRhYmxlPSIxIj5BZ2VudCBUaWNrZXQgQ3VzdG9tZXIgU2Vzc2lvbjwvSXRlbT4KICAgICAgICAgICAgICAgICAgICA8SXRlbSBLZXk9Ik5hdkJhck5hbWUiPkFnZW50IFRpY2tldCBDdXN0b21lciBTZXNzaW9uPC9JdGVtPgogICAgICAgICAgICAgICAgPC9IYXNoPgogICAgICAgICAgICA8L0l0ZW0+CiAgICAgICAgPC9WYWx1ZT4KICAgIDwvU2V0dGluZz4KICAgIDxTZXR0aW5nIE5hbWU9IlRpY2tldDo6RnJvbnRlbmQ6OkFnZW50VGlja2V0Q3VzdG9tZXJTZXNzaW9uIyMjRHluYW1pY0ZpZWxkIiBSZXF1aXJlZD0iMCIgVmFsaWQ9IjEiPgogICAgICAgIDxEZXNjcmlwdGlvbiBUcmFuc2xhdGFibGU9IjEiPlRpY2tldCBkeW5hbWljIGZpZWxkcyB0aGF0IGhvbGQgdGVtcG9yYXJ5IGN1c3RvbWVyIHVzZXIgc2Vzc2lvbiB2YWx1ZSBmb3IgbW9kdWxlIFB1YmxpY1RpY2tldENsb3NlLjwvRGVzY3JpcHRpb24+CiAgICAgICAgPE5hdmlnYXRpb24+RnJvbnRlbmQ6OkFnZW50OjpWaWV3OjpUaWNrZXRDdXN0b21lclNlc3Npb248L05hdmlnYXRpb24+CiAgICAgICAgPFZhbHVlPgogICAgICAgICAgICA8SXRlbSBWYWx1ZVR5cGU9IlN0cmluZyI+Q3VzdG9tZXJTZXNzaW9uPC9JdGVtPgogICAgICAgIDwvVmFsdWU+CiAgICA8L1NldHRpbmc+ICAKPC9vdHJzX2NvbmZpZz4K</File>
        <File Location="Kernel/Modules/PublicTicketClose.pm" Permission="644" Encode="Base64">IyAtLQojIENvcHlyaWdodCAoQykgMjAyMi0yMDI0IG1vLWF6ZmFyLCBodHRwczovL2dpdGh1Yi5jb20vbW8tYXpmYXIKIyAtLQojIFRoaXMgc29mdHdhcmUgY29tZXMgd2l0aCBBQlNPTFVURUxZIE5PIFdBUlJBTlRZLiBGb3IgZGV0YWlscywgc2VlCiMgdGhlIGVuY2xvc2VkIGZpbGUgQ09QWUlORyBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbiAoR1BMKS4gSWYgeW91CiMgZGlkIG5vdCByZWNlaXZlIHRoaXMgZmlsZSwgc2VlIGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvZ3BsLTMuMC50eHQuCiMgLS0KCnBhY2thZ2UgS2VybmVsOjpNb2R1bGVzOjpQdWJsaWNUaWNrZXRDbG9zZTsKCnVzZSBzdHJpY3Q7CnVzZSB3YXJuaW5nczsKCnVzZSBLZXJuZWw6OlN5c3RlbTo6VmFyaWFibGVDaGVjayBxdyg6YWxsKTsKdXNlIEtlcm5lbDo6TGFuZ3VhZ2UgcXcoVHJhbnNsYXRhYmxlKTsKCm91ciAkT2JqZWN0TWFuYWdlckRpc2FibGVkID0gMTsKCnN1YiBuZXcgewogICAgbXkgKCAkVHlwZSwgJVBhcmFtICkgPSBAXzsKCiAgICAjIGFsbG9jYXRlIG5ldyBoYXNoIGZvciBvYmplY3QKICAgIG15ICRTZWxmID0geyVQYXJhbX07CiAgICBibGVzcyggJFNlbGYsICRUeXBlICk7CgogICAgcmV0dXJuICRTZWxmOwp9CgpzdWIgUnVuIHsKICAgIG15ICggJFNlbGYsICVQYXJhbSApID0gQF87CgojIFVSTCAtIGh0dHBzOi8vYXBwLndzbC5teS96bnVueS1kZXZlbC9wdWJsaWMucGw/QWN0aW9uPVB1YmxpY1RpY2tldENsb3NlO1Nlc3Npb25JRD08R0VORVJBVEVEX1NFU1NJT05fSUQ+O1RpY2tldE51bWJlcj08T1RSU19USUNLRVRfVGlja2V0TnVtYmVyPgoKICAgIG15ICRQYXJhbU9iamVjdCAgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6V2ViOjpSZXF1ZXN0Jyk7CiAgICBteSAkVGlja2V0T2JqZWN0ID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OlRpY2tldCcpOwogICAgbXkgJExheW91dE9iamVjdCA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6T3V0cHV0OjpIVE1MOjpMYXlvdXQnKTsKCiAgICBteSAlR2V0UGFyYW07CiAgICBmb3IgbXkgJE5lZWRlZCAocXcoIFNlc3Npb25JRCBUaWNrZXROdW1iZXIgKSkKICAgIHsKICAgICAgICAkR2V0UGFyYW17JE5lZWRlZH0gPSAkUGFyYW1PYmplY3QtPkdldFBhcmFtKCBQYXJhbSA9PiAkTmVlZGVkICk7CgogICAgICAgIGlmICggISRHZXRQYXJhbXskTmVlZGVkfSApIHsKICAgICAgICAgICAgcmV0dXJuICRMYXlvdXRPYmplY3QtPkN1c3RvbWVyTm9QZXJtaXNzaW9uKCBXaXRoSGVhZGVyID0+ICd5ZXMnICk7CiAgICAgICAgfQogICAgfQoKICAgICN2YWxpZGF0ZSBzZXNzaW9uCiAgICAjbWFrZSBzdXJlIHVzZSBmcm9tIGdlbmVyYXRlZCBvbmUgd2l0aCB2YWxpZCB0aWNrZXQgbnVtYmVyLgogICAgI2Fsc28gY2hlY2sgdXNlciBhY2Nlc3MKICAgIG15ICVTZXNzaW9uQ2hlY2sgPSAkU2VsZi0+X1Nlc3Npb25DaGVjaygKICAgICAgICBTZXNzaW9uSUQgICAgPT4gJEdldFBhcmFte1Nlc3Npb25JRH0sCiAgICAgICAgVGlja2V0TnVtYmVyID0+ICRHZXRQYXJhbXtUaWNrZXROdW1iZXJ9LAogICAgKTsKCiAgICBpZiAoICRTZXNzaW9uQ2hlY2t7U3RhdHVzfSBlcSAnRXJyb3InICkKICAgIHsKICAgICAgICAjcmV0dXJuICRMYXlvdXRPYmplY3QtPkN1c3RvbWVyTm9QZXJtaXNzaW9uKCBXaXRoSGVhZGVyID0+ICd5ZXMnICk7CiAgICAgICAgJExheW91dE9iamVjdC0+QmxvY2soCiAgICAgICAgICAgIE5hbWUgPT4gJ0Vycm9yJywKICAgICAgICAgICAgRGF0YSA9PiB7CiAgICAgICAgICAgICAgICBNZXNzYWdlID0+ICRTZXNzaW9uQ2hlY2t7TWVzc2FnZX0sCiAgICAgICAgICAgIH0sCiAgICAgICAgKTsKICAgIH0KCiAgICBlbHNlCiAgICB7CiAgICAgICAgbXkgJFRpY2tldE9iamVjdCA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpUaWNrZXQnKTsKICAgICAgICBteSAkQ29uZmlnT2JqZWN0ID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpDb25maWcnKTsKCiAgICAgICAgbXkgJVRpY2tldCA9ICRUaWNrZXRPYmplY3QtPlRpY2tldEdldCgKICAgICAgICAgICAgVGlja2V0SUQgICAgICA9PiAkU2Vzc2lvbkNoZWNre1RpY2tldElEfSwKICAgICAgICAgICAgRHluYW1pY0ZpZWxkcyA9PiAwLAogICAgICAgICk7CgogICAgICAgIGlmICggJFRpY2tldHtTdGF0ZX0gPX4gL15jbG9zZS9pICkKICAgICAgICB7CiAgICAgICAgICAgICRMYXlvdXRPYmplY3QtPkJsb2NrKAogICAgICAgICAgICAgICAgTmFtZSA9PiAnQ2xvc2VkJywKICAgICAgICAgICAgICAgIERhdGEgPT4gewogICAgICAgICAgICAgICAgICAgIFRpY2tldE51bWJlciA9PiAkU2Vzc2lvbkNoZWNre1RpY2tldE51bWJlcn0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICBteSAkU3VjY2VzcyA9ICRUaWNrZXRPYmplY3QtPlRpY2tldFN0YXRlU2V0KAogICAgICAgICAgICAgICAgU3RhdGUgICAgPT4gJ2Nsb3NlZCBzdWNjZXNzZnVsJywKICAgICAgICAgICAgICAgIFRpY2tldElEID0+ICRTZXNzaW9uQ2hlY2t7VGlja2V0SUR9LAogICAgICAgICAgICAgICAgVXNlcklEICAgPT4gJENvbmZpZ09iamVjdC0+R2V0KCdDdXN0b21lclBhbmVsVXNlcklEJyksCiAgICAgICAgICAgICk7CgogICAgICAgICAgICBpZiAoICEkU3VjY2VzcyApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG15ICRPdXRwdXQgPSAkTGF5b3V0T2JqZWN0LT5DdXN0b21lckhlYWRlcigKICAgICAgICAgICAgICAgICAgICBUaXRsZSA9PiBUcmFuc2xhdGFibGUoJ0Vycm9yJyksCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgJE91dHB1dCAuPSAkTGF5b3V0T2JqZWN0LT5DdXN0b21lckVycm9yKAogICAgICAgICAgICAgICAgICAgIE1lc3NhZ2UgPT4gVHJhbnNsYXRhYmxlKCJVbmZvcnR1bmF0ZWx5LCAgVGlja2V0IyRTZXNzaW9uQ2hlY2t7VGlja2V0TnVtYmVyfSBjYW4ndCBiZSBjbG9zZS4iKSwKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAkT3V0cHV0IC49ICRMYXlvdXRPYmplY3QtPkN1c3RvbWVyRm9vdGVyKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gJE91dHB1dDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgIyBzZXQgdW5sb2NrIG9uIGNsb3NlIHN0YXRlCiAgICAgICAgICAgICRUaWNrZXRPYmplY3QtPlRpY2tldExvY2tTZXQoCiAgICAgICAgICAgICAgICBUaWNrZXRJRCA9PiAkU2Vzc2lvbkNoZWNre1RpY2tldElEfSwKICAgICAgICAgICAgICAgIExvY2sgICAgID0+ICd1bmxvY2snLAogICAgICAgICAgICAgICAgVXNlcklEICAgPT4gJENvbmZpZ09iamVjdC0+R2V0KCdDdXN0b21lclBhbmVsVXNlcklEJyksCiAgICAgICAgICAgICk7CgogICAgICAgICAgICBteSAkQXJ0aWNsZU9iamVjdCAgICAgICAgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6VGlja2V0OjpBcnRpY2xlJyk7CiAgICAgICAgICAgIG15ICRBcnRpY2xlQmFja2VuZE9iamVjdCA9ICRBcnRpY2xlT2JqZWN0LT5CYWNrZW5kRm9yQ2hhbm5lbCggQ2hhbm5lbE5hbWUgPT4gJ0ludGVybmFsJyApOwogICAgICAgICAgICBteSAkQXJ0aWNsZUlEICAgICAgICAgICAgPSAkQXJ0aWNsZUJhY2tlbmRPYmplY3QtPkFydGljbGVDcmVhdGUoCiAgICAgICAgICAgICAgICBUaWNrZXRJRCAgICAgICAgICAgICA9PiAkU2Vzc2lvbkNoZWNre1RpY2tldElEfSwKICAgICAgICAgICAgICAgIFNlbmRlclR5cGUgICAgICAgICAgID0+ICdjdXN0b21lcicsCiAgICAgICAgICAgICAgICBJc1Zpc2libGVGb3JDdXN0b21lciA9PiAxLAogICAgICAgICAgICAgICAgVXNlcklEICAgICAgICAgICAgICAgPT4gJENvbmZpZ09iamVjdC0+R2V0KCdDdXN0b21lclBhbmVsVXNlcklEJyksCiAgICAgICAgICAgICAgICBGcm9tICAgICAgICAgICAgICAgICA9PiAkU2Vzc2lvbkNoZWNre0Zyb219LAogICAgICAgICAgICAgICAgU3ViamVjdCAgICAgICAgICAgICAgPT4gJFRpY2tldHtUaXRsZX0sCiAgICAgICAgICAgICAgICBCb2R5ICAgICAgICAgICAgICAgICA9PiAnQXV0byBnZW5lcmF0ZWQgbm90ZWQuPGJyLz5UaWNrZXQgbm93IGNsb3NlZCBieSBjdXN0b21lci4nLAogICAgICAgICAgICAgICAgQ29udGVudFR5cGUgICAgICAgICAgPT4gJ3RleHQvaHRtbDsgY2hhcnNldD1VVEYtOCcsCiAgICAgICAgICAgICAgICBIaXN0b3J5VHlwZSAgICAgICAgICA9PiAnRm9sbG93VXAnLAogICAgICAgICAgICAgICAgSGlzdG9yeUNvbW1lbnQgICAgICAgPT4gJ0FkZGVkIGZvbGxvdy11cCBmcm9tIEN1c3RvbWVyVGlja2V0Q2xvc2UgdG8gdGlja2V0JywKICAgICAgICAgICAgICAgIE5vQWdlbnROb3RpZnkgPT4gMCwgICAgIyBpZiB5b3UgZG9uJ3Qgd2FudCB0byBzZW5kIGFnZW50IG5vdGlmaWNhdGlvbnMKICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICRMYXlvdXRPYmplY3QtPkJsb2NrKAogICAgICAgICAgICAgICAgTmFtZSA9PiAnQ2xvc2luZycsCiAgICAgICAgICAgICAgICBEYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICBUaWNrZXROdW1iZXIgPT4gJFNlc3Npb25DaGVja3tUaWNrZXROdW1iZXJ9LAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgKTsKCiAgICAgICAgfQoKICAgICAgICBteSAkU2Vzc2lvbk9iamVjdCA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpBdXRoU2Vzc2lvbicpOwoKICAgICAgICAjIGRlc3Ryb3kgZ2VuZXJhdGVkIHNlc3Npb24KICAgICAgICAkU2Vzc2lvbk9iamVjdC0+UmVtb3ZlU2Vzc2lvbklEKCBTZXNzaW9uSUQgPT4gJEdldFBhcmFte1Nlc3Npb25JRH0gKTsKCiAgICB9CgogICAgIyBnZW5lcmF0ZSBvdXRwdXQKICAgIG15ICRPdXRwdXQgPSAkTGF5b3V0T2JqZWN0LT5DdXN0b21lckhlYWRlciggVmFsdWUgPT4gJ0Nsb3NlIFRpY2tldCcgKTsKCiAgICAkT3V0cHV0IC49ICRMYXlvdXRPYmplY3QtPk91dHB1dCgKICAgICAgICBUZW1wbGF0ZUZpbGUgPT4gJ1B1YmxpY1RpY2tldENsb3NlJywKICAgICAgICBEYXRhICAgICAgICAgPT4gewogICAgICAgICAgICAlUGFyYW0sCiAgICAgICAgfSwKICAgICk7CgogICAgJE91dHB1dCAuPSAkTGF5b3V0T2JqZWN0LT5DdXN0b21lckZvb3RlcigpOwoKICAgIHJldHVybiAkT3V0cHV0OwoKfQoKc3ViIF9TZXNzaW9uQ2hlY2sgewogICAgbXkgKCAkU2VsZiwgJVBhcmFtICkgPSBAXzsKCiAgICBteSAlU2Vzc2lvblZhbGlkYXRlOwoKICAgIG15ICRTZXNzaW9uT2JqZWN0ID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OkF1dGhTZXNzaW9uJyk7CiAgICBteSAlU2Vzc2lvbkRhdGEgICA9ICRTZXNzaW9uT2JqZWN0LT5HZXRTZXNzaW9uSUREYXRhKAogICAgICAgIFNlc3Npb25JRCA9PiAkUGFyYW17U2Vzc2lvbklEfSwKICAgICk7CgogICAgI0ludmFsaWQgU2Vzc2lvbiBEYXRhIQogICAgaWYgKCAkU2Vzc2lvbkRhdGF7U2Vzc2lvblNvdXJjZX0gbmUgJ0dlbmVyaWNJbnRlcmZhY2UnICkKICAgIHsKICAgICAgICAkU2Vzc2lvblZhbGlkYXRle1N0YXR1c30gID0gJ0Vycm9yJzsKICAgICAgICAkU2Vzc2lvblZhbGlkYXRle01lc3NhZ2V9ID0gJ1VuZm9ydHVuYXRlbHksIFRoaXMgU2Vzc2lvbiBObyBMb25nZXIgVmFsaWQnOwogICAgICAgIHJldHVybiAlU2Vzc2lvblZhbGlkYXRlOwogICAgfQoKICAgICNJbnZhbGlkIFRpY2tldCBOdW1iZXIgaW4gVVJMCiAgICBpZiAoICRTZXNzaW9uRGF0YXtUaWNrZXROdW1iZXJ9IG5lICRQYXJhbXtUaWNrZXROdW1iZXJ9ICkKICAgIHsKICAgICAgICAkU2Vzc2lvblZhbGlkYXRle1N0YXR1c30gID0gJ0Vycm9yJzsKICAgICAgICAkU2Vzc2lvblZhbGlkYXRle01lc3NhZ2V9ID0gJ0ludmFsaWQgVGlja2V0IE51bWJlcic7CiAgICAgICAgcmV0dXJuICVTZXNzaW9uVmFsaWRhdGU7CiAgICB9CgogICAgbXkgJFRpY2tldE9iamVjdCA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpUaWNrZXQnKTsKCiAgICAjc2VhcmNoIGZvciB0aWNrZXQgaWQKICAgIG15ICRUaWNrZXRJRCA9ICRUaWNrZXRPYmplY3QtPlRpY2tldElETG9va3VwKAogICAgICAgIFRpY2tldE51bWJlciA9PiAkU2Vzc2lvbkRhdGF7VGlja2V0TnVtYmVyfSwKICAgICAgICBVc2VySUQgICAgICAgPT4gJFNlc3Npb25EYXRhe1VzZXJJRH0sCiAgICApOwoKICAgIGlmICggISRUaWNrZXRJRCApCiAgICB7CiAgICAgICAgJFNlc3Npb25WYWxpZGF0ZXtTdGF0dXN9ICA9ICdFcnJvcic7CiAgICAgICAgJFNlc3Npb25WYWxpZGF0ZXtNZXNzYWdlfSA9ICdUaWNrZXQgTm90IEZvdW5kJzsKICAgICAgICByZXR1cm4gJVNlc3Npb25WYWxpZGF0ZTsKICAgIH0KCiAgICAjIGNoZWNrIGFjY2VzcyBwZXJtaXNzaW9ucwogICAgbXkgJEFjY2VzcyA9ICRUaWNrZXRPYmplY3QtPlRpY2tldEN1c3RvbWVyUGVybWlzc2lvbigKICAgICAgICBUeXBlICAgICA9PiAncm8nLAogICAgICAgIFRpY2tldElEID0+ICRUaWNrZXRJRCwKICAgICAgICBVc2VySUQgICA9PiAkU2Vzc2lvbkRhdGF7VXNlcklEfSwKICAgICk7CgogICAgaWYgKCAhJEFjY2VzcyApCiAgICB7CiAgICAgICAgJFNlc3Npb25WYWxpZGF0ZXtTdGF0dXN9ICA9ICdFcnJvcic7CiAgICAgICAgJFNlc3Npb25WYWxpZGF0ZXtNZXNzYWdlfSA9ICdZb3UgaGF2ZSBubyBwZXJtaXNzaW9uJzsKICAgICAgICByZXR1cm4gJVNlc3Npb25WYWxpZGF0ZTsKICAgIH0KCiAgICAkU2Vzc2lvblZhbGlkYXRle1N0YXR1c30gICAgICAgPSAnT0snOwogICAgJFNlc3Npb25WYWxpZGF0ZXtUaWNrZXRJRH0gICAgID0gJFRpY2tldElEOwogICAgJFNlc3Npb25WYWxpZGF0ZXtUaWNrZXROdW1iZXJ9ID0gJFNlc3Npb25EYXRhe1RpY2tldE51bWJlcn07CiAgICAkU2Vzc2lvblZhbGlkYXRle0Zyb219ICAgICAgICAgPSAiXCIkU2Vzc2lvbkRhdGF7VXNlckZ1bGxuYW1lfVwiIDwkU2Vzc2lvbkRhdGF7VXNlckVtYWlsfT4iOwoKICAgIHJldHVybiAlU2Vzc2lvblZhbGlkYXRlOwp9CgoxOwo=</File>
        <File Location="Kernel/Output/HTML/Templates/Standard/PublicTicketClose.tt" Permission="644" Encode="Base64">IyAtLQojIENvcHlyaWdodCAoQykgMjAyMyBtby1hemZhciwgaHR0cHM6Ly9naXRodWIuY29tL21vLWF6ZmFyCiMgQ29weXJpZ2h0IChDKSAyMDAxLTIwMjEgT1RSUyBBRywgaHR0cHM6Ly9vdHJzLmNvbS8KIyBDb3B5cmlnaHQgKEMpIDIwMjEgWm51bnkgR21iSCwgaHR0cHM6Ly96bnVueS5vcmcvCiMgLS0KIyBUaGlzIHNvZnR3YXJlIGNvbWVzIHdpdGggQUJTT0xVVEVMWSBOTyBXQVJSQU5UWS4gRm9yIGRldGFpbHMsIHNlZQojIHRoZSBlbmNsb3NlZCBmaWxlIENPUFlJTkcgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24gKEFHUEwpLiBJZiB5b3UKIyBkaWQgbm90IHJlY2VpdmUgdGhpcyBmaWxlLCBzZWUgaHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzL2FncGwudHh0LgojIC0tCgo8ZGl2IGlkPSJNYWluQm94IiBjbGFzcz0iTG9naW4iPgogICAgPGRpdiBjbGFzcz0iQ29udGVudCI+CiAgICAgICAgWyUgUmVuZGVyQmxvY2tTdGFydCgiRXJyb3IiKSAlXQogICAgICAgIDxoMj5bJSBEYXRhLk1lc3NhZ2UgfCBodG1sICVdPC9oMj4KICAgICAgICA8aDM+PGEgaHJlZj0iWyUgRW52KCJCYXNlbGluayIpICVdIj5bJSBUcmFuc2xhdGUoIlZpc2l0IE91ciBGQVEgSGVyZSIpIHwgaHRtbCAlXTwvYT48L2gzPgogICAgICAgIFslIFJlbmRlckJsb2NrRW5kKCJFcnJvciIpICVdICAgCiAgICAgICAgWyUgUmVuZGVyQmxvY2tTdGFydCgiQ2xvc2luZyIpICVdCiAgICAgICAgPGgyPlslIFRyYW5zbGF0ZSgiVGlja2V0IyIpIHwgaHRtbCAlXVslIERhdGEuVGlja2V0TnVtYmVyIHwgaHRtbCAlXVslIFRyYW5zbGF0ZSgiIGlzIG5vdyBjbG9zZWQuIikgfCBodG1sICVdPC9oMj4KICAgICAgICA8aDM+WyUgVHJhbnNsYXRlKCJEb250IEZvcmdldCB0byBSYXRlIFVzIExhdGVyLiIpIHwgaHRtbCAlXTwvaDM+CiAgICAgICAgPGgzPjxhIGhyZWY9IlslIEVudigiQmFzZWxpbmsiKSAlXSI+WyUgVHJhbnNsYXRlKCJWaXNpdCBPdXIgRkFRIEhlcmUiKSB8IGh0bWwgJV08L2E+PC9oMz4KICAgICAgICBbJSBSZW5kZXJCbG9ja0VuZCgiQ2xvc2luZyIpICVdIAogICAgICAgIFslIFJlbmRlckJsb2NrU3RhcnQoIkNsb3NlZCIpICVdCiAgICAgICAgPGgyPlslIFRyYW5zbGF0ZSgiVGlja2V0IyIpIHwgaHRtbCAlXVslIERhdGEuVGlja2V0TnVtYmVyIHwgaHRtbCAlXVslIFRyYW5zbGF0ZSgiIGFscmVhZHkgY2xvc2VkLiIpIHwgaHRtbCAlXTwvaDI+CiAgICAgICAgPGgzPlslIFRyYW5zbGF0ZSgiRG9udCBGb3JnZXQgdG8gUmF0ZSBVcyBMYXRlci4iKSB8IGh0bWwgJV08L2gzPgogICAgICAgIDxoMz48YSBocmVmPSJbJSBFbnYoIkJhc2VsaW5rIikgJV0iPlslIFRyYW5zbGF0ZSgiVmlzaXQgT3VyIEZBUSBIZXJlIikgfCBodG1sICVdPC9hPjwvaDM+CiAgICAgICAgWyUgUmVuZGVyQmxvY2tFbmQoIkNsb3NlZCIpICVdICAKICAgIDwvZGl2Pgo8L2Rpdj4K</File>
        <File Location="Kernel/Modules/AgentTicketCustomerSession.pm" Permission="644" Encode="Base64">IyAtLQojIENvcHlyaWdodCAoQykgMjAyMi0yMDI0IG1vLWF6ZmFyLCBodHRwczovL2dpdGh1Yi5jb20vbW8tYXpmYXIKIyAtLQojIFRoaXMgc29mdHdhcmUgY29tZXMgd2l0aCBBQlNPTFVURUxZIE5PIFdBUlJBTlRZLiBGb3IgZGV0YWlscywgc2VlCiMgdGhlIGVuY2xvc2VkIGZpbGUgQ09QWUlORyBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbiAoR1BMKS4gSWYgeW91CiMgZGlkIG5vdCByZWNlaXZlIHRoaXMgZmlsZSwgc2VlIGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvZ3BsLTMuMC50eHQuCiMgLS0KCnBhY2thZ2UgS2VybmVsOjpNb2R1bGVzOjpBZ2VudFRpY2tldEN1c3RvbWVyU2Vzc2lvbjsKCnVzZSBzdHJpY3Q7CnVzZSB3YXJuaW5nczsKCm91ciBAT2JqZWN0RGVwZW5kZW5jaWVzID0gKAogICAgJ0tlcm5lbDo6Q29uZmlnJywKICAgICdLZXJuZWw6Ok91dHB1dDo6SFRNTDo6TGF5b3V0JywKICAgICdLZXJuZWw6OlN5c3RlbTo6QXV0aFNlc3Npb24nLAogICAgJ0tlcm5lbDo6U3lzdGVtOjpDdXN0b21lclVzZXInLAogICAgJ0tlcm5lbDo6U3lzdGVtOjpEeW5hbWljRmllbGQnLAogICAgJ0tlcm5lbDo6U3lzdGVtOjpEeW5hbWljRmllbGQ6OkJhY2tlbmQnLAogICAgJ0tlcm5lbDo6U3lzdGVtOjpUaWNrZXQnLAopOwoKdXNlIEtlcm5lbDo6TGFuZ3VhZ2UgcXcoVHJhbnNsYXRhYmxlKTsKCnN1YiBuZXcgewogICAgbXkgKCAkVHlwZSwgJVBhcmFtICkgPSBAXzsKCiAgICAjIGFsbG9jYXRlIG5ldyBoYXNoIGZvciBvYmplY3QKICAgIG15ICRTZWxmID0geyVQYXJhbX07CiAgICBibGVzcyggJFNlbGYsICRUeXBlICk7CgogICAgcmV0dXJuICRTZWxmOwp9CgpzdWIgUnVuIHsKICAgIG15ICggJFNlbGYsICVQYXJhbSApID0gQF87CgogICAgbXkgJExheW91dE9iamVjdCA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6T3V0cHV0OjpIVE1MOjpMYXlvdXQnKTsKICAgIG15ICRUaWNrZXRPYmplY3QgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6VGlja2V0Jyk7CgogICAgaWYgKCAhJFNlbGYtPntUaWNrZXRJRH0gKSB7CiAgICAgICAgcmV0dXJuICRMYXlvdXRPYmplY3QtPkVycm9yU2NyZWVuKAogICAgICAgICAgICBNZXNzYWdlID0+ICdObyBUaWNrZXRJRCBpcyBnaXZlbiEnLAogICAgICAgICAgICBDb21tZW50ID0+ICdQbGVhc2UgY29udGFjdCB0aGUgYWRtaW4uJywKICAgICAgICApOwogICAgfQoKICAgIG15ICRBY2Nlc3NPayA9ICRUaWNrZXRPYmplY3QtPk93bmVyQ2hlY2soCiAgICAgICAgVGlja2V0SUQgPT4gJFNlbGYtPntUaWNrZXRJRH0sCiAgICAgICAgT3duZXJJRCAgPT4gJFNlbGYtPntVc2VySUR9LAogICAgKTsKCiAgICBpZiAoICEkQWNjZXNzT2sgKQogICAgewogICAgICAgIHJldHVybiAkTGF5b3V0T2JqZWN0LT5FcnJvclNjcmVlbigKICAgICAgICAgICAgTWVzc2FnZSA9PiAnTmVlZCBvd25lciEnLAogICAgICAgICAgICBDb21tZW50ID0+ICdQbGVhc2UgY29udGFjdCB0aGUgYWRtaW4uJywKICAgICAgICApOwogICAgfQoKICAgIG15ICRDb25maWdPYmplY3QgICAgICAgICAgICAgID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpDb25maWcnKTsKICAgIG15ICRDdXN0b21lclVzZXJPYmplY3QgICAgICAgID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OkN1c3RvbWVyVXNlcicpOwogICAgbXkgJFNlc3Npb25PYmplY3QgICAgICAgICAgICAgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6QXV0aFNlc3Npb24nKTsKICAgIG15ICREeW5hbWljRmllbGRPYmplY3QgICAgICAgID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OkR5bmFtaWNGaWVsZCcpOwogICAgbXkgJER5bmFtaWNGaWVsZEJhY2tlbmRPYmplY3QgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6RHluYW1pY0ZpZWxkOjpCYWNrZW5kJyk7CiAgICBteSAkRGF0ZVRpbWVPYmplY3QgICAgICAgICAgICA9ICRLZXJuZWw6Ok9NLT5DcmVhdGUoJ0tlcm5lbDo6U3lzdGVtOjpEYXRlVGltZScpOwogICAgbXkgJEVwb2NoICAgICAgICAgICAgICAgICAgICAgPSAkRGF0ZVRpbWVPYmplY3QtPlRvRXBvY2goKTsKCiAgICBteSAlVGlja2V0ID0gJFRpY2tldE9iamVjdC0+VGlja2V0R2V0KAogICAgICAgIFRpY2tldElEICAgICAgPT4gJFNlbGYtPntUaWNrZXRJRH0sCiAgICAgICAgRHluYW1pY0ZpZWxkcyA9PiAwLAogICAgKTsKCiAgICAjanVzdCBpbiBjYXNlIHRpY2tldCBjdXN0b21lciBjaGFuZ2UgZnJvbSB2YWxpZCB0byBub24gdmFsaWQuCiAgICBteSAlVXNlckRhdGEgPSAkQ3VzdG9tZXJVc2VyT2JqZWN0LT5DdXN0b21lclVzZXJEYXRhR2V0KAogICAgICAgIFVzZXIgID0+ICRUaWNrZXR7Q3VzdG9tZXJVc2VySUR9LAogICAgICAgIFZhbGlkID0+IDEsCiAgICApOwoKICAgIGlmICggISRVc2VyRGF0YXtVc2VySUR9ICkKICAgIHsKICAgICAgICByZXR1cm4gJExheW91dE9iamVjdC0+RXJyb3JTY3JlZW4oCiAgICAgICAgICAgIE1lc3NhZ2UgPT4gJ05lZWQgYSB2YWxpZCBjdXN0b21lciB1c2VyIScsCiAgICAgICAgICAgIENvbW1lbnQgPT4gJ1BsZWFzZSBjb250YWN0IHRoZSBhZG1pbi4nLAogICAgICAgICk7CiAgICB9CgogICAgbXkgJER5bmFtaWNGaWVsZE5hbWUgPSAkQ29uZmlnT2JqZWN0LT5HZXQoJ1RpY2tldDo6RnJvbnRlbmQ6OkFnZW50VGlja2V0Q3VzdG9tZXJTZXNzaW9uJyktPnsnRHluYW1pY0ZpZWxkJ307CgogICAgaWYgKCAhJER5bmFtaWNGaWVsZE5hbWUgKQogICAgewogICAgICAgIHJldHVybiAkTGF5b3V0T2JqZWN0LT5FcnJvclNjcmVlbigKICAgICAgICAgICAgTWVzc2FnZSA9PiAnVGlja2V0OjpGcm9udGVuZDo6QWdlbnRUaWNrZXRDdXN0b21lclNlc3Npb24jIyNEeW5hbWljRmllbGQgaXMgbm90IHNldCcsCiAgICAgICAgICAgIENvbW1lbnQgPT4gJ1BsZWFzZSBjb250YWN0IHRoZSBhZG1pbi4nLAogICAgICAgICk7CiAgICB9CgogICAgbXkgJER5bmFtaWNGaWVsZEN1c3RvbWVyU2Vzc2lvbiA9ICREeW5hbWljRmllbGRPYmplY3QtPkR5bmFtaWNGaWVsZEdldCgKICAgICAgICBOYW1lID0+ICREeW5hbWljRmllbGROYW1lLAogICAgKTsKCiAgICBpZiAoICEleyREeW5hbWljRmllbGRDdXN0b21lclNlc3Npb259ICkKICAgIHsKICAgICAgICByZXR1cm4gJExheW91dE9iamVjdC0+RXJyb3JTY3JlZW4oCiAgICAgICAgICAgIE1lc3NhZ2UgPT4gJ1RpY2tldDo6RnJvbnRlbmQ6OkFnZW50VGlja2V0Q3VzdG9tZXJTZXNzaW9uIyMjRHluYW1pY0ZpZWxkIGlzIG5vdCBhIHZhbGlkIGZpZWxkJywKICAgICAgICAgICAgQ29tbWVudCA9PiAnUGxlYXNlIGNvbnRhY3QgdGhlIGFkbWluLicsCiAgICAgICAgKTsKICAgIH0KCiAgICBteSAkQ3VzdG9tZXJTZXNzaW9uVmFsdWUgPSAkRHluYW1pY0ZpZWxkQmFja2VuZE9iamVjdC0+VmFsdWVHZXQoCiAgICAgICAgRHluYW1pY0ZpZWxkQ29uZmlnID0+ICREeW5hbWljRmllbGRDdXN0b21lclNlc3Npb24sCiAgICAgICAgT2JqZWN0SUQgICAgICAgICAgID0+ICRTZWxmLT57VGlja2V0SUR9LAogICAgKTsKCiAgICBpZiAoJEN1c3RvbWVyU2Vzc2lvblZhbHVlKQogICAgewogICAgICAgICNyZW1vdmUgZXhpc3Rpbmcgc2Vzc2lvbiBpZAogICAgICAgICRTZXNzaW9uT2JqZWN0LT5SZW1vdmVTZXNzaW9uSUQoIFNlc3Npb25JRCA9PiAkQ3VzdG9tZXJTZXNzaW9uVmFsdWUgKTsKICAgIH0KCiAgICAjY3JlYXRlIG5ldyBjdXN0b21lciBzZXNzaW9uIHdpdGggdGlja2V0IG51bWJlcgogICAgbXkgJE5ld1Nlc3Npb25JRCA9ICRTZXNzaW9uT2JqZWN0LT5DcmVhdGVTZXNzaW9uSUQoCiAgICAgICAgJVVzZXJEYXRhLAogICAgICAgIFVzZXJMYXN0UmVxdWVzdCA9PiAkRXBvY2gsCiAgICAgICAgVXNlclR5cGUgICAgICAgID0+ICdDdXN0b21lcicsCiAgICAgICAgU2Vzc2lvblNvdXJjZSAgID0+ICdHZW5lcmljSW50ZXJmYWNlJywKICAgICAgICBUaWNrZXROdW1iZXIgICAgPT4gJFRpY2tldHtUaWNrZXROdW1iZXJ9LAogICAgKTsKCiAgICBteSAkU2V0Q3VzdG9tZXJTZXNzaW9uVmFsdWUgPSAkRHluYW1pY0ZpZWxkQmFja2VuZE9iamVjdC0+VmFsdWVTZXQoCiAgICAgICAgRHluYW1pY0ZpZWxkQ29uZmlnID0+ICREeW5hbWljRmllbGRDdXN0b21lclNlc3Npb24sCiAgICAgICAgT2JqZWN0SUQgICAgICAgICAgID0+ICRTZWxmLT57VGlja2V0SUR9LAogICAgICAgIFZhbHVlICAgICAgICAgICAgICA9PiAkTmV3U2Vzc2lvbklELAogICAgICAgIFVzZXJJRCAgICAgICAgICAgICA9PiAkU2VsZi0+e1VzZXJJRH0sCiAgICApOwoKICAgICNyZXR1cm4gb3V0cHV0CiAgICByZXR1cm4gJExheW91dE9iamVjdC0+UmVkaXJlY3QoCiAgICAgICAgT1AgPT4gIkFjdGlvbj1BZ2VudFRpY2tldFpvb207VGlja2V0SUQ9JFNlbGYtPntUaWNrZXRJRH0iLAogICAgKTsKfQoKMTsK</File>
    </Filelist>
</otrs_package>